#!/usr/bin/env python

import sys
import os

# flymake file to process
filepath = os.path.join(os.path.realpath(os.curdir), sys.argv[1])

content = open(filepath, "r").read()
if "import maya" in content or "from maya" in content:
    command = 'env PYTHONPATH=/milk/users/benoit/devinstall/python2.7/centos6:/milk/code/central/python2.7/centos6:/milk/code/central/addons/el6/maya2014/python:/milk/apps/autodesk/maya/2014extSP1/lib/python2.7/site-packages/:/milk/code/shotgun/studio/install/core/python/ LD_LIBRARY_PATH=/milk/code/central/lib/centos6/gcc-4.4.7/ /milk/code/dev/bin/centos6/python2.7 -c "import sys; from pylint import epylint; sys.argv.append(\\\"%s\\\"); epylint.Run()"' % filepath
    os.system(command)
else:
    import os
    os.environ["PYTHONPATH"]="/milk/users/benoit/devinstall/python2.6/centos6:/milk/code/central/python2.6/centos6:/milk/code/central/addons/el6/maya2014/python/:/milk/code/shotgun/studio/install/core/python/"
    os.environ["LD_LIBRARY_PATH"]="/milk/code/central/lib/centos6/gcc-4.4.7"
    from pylint import epylint
    epylint.Run()
